<!DOCTYPE html>
<html>
  <head>
    <!-- Libraries -->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    <script> 

    var realname = JSON.parse(window.sessionStorage.getItem("puzzleData"))["wifi"];
    $(document).keyup(function (e) {

      if ($("#makewifi:focus") && (e.keyCode === 13)) {
         var startWith = new RegExp("~# airbase- c 11 -v mon0");
         var userinput = $("#makewifi").val();
         if (!startWith.test(userinput)) {
            alert("Dont remove the necessary commands. Try to add the name of your wifi hotspot.");
             $("#makewifi").val("~# airbase- c 11 -v mon0 ")
         } else {

            //wifi dependable:
            if (realname == "Mariot Hotel Wi-fi") {
              validateWifi(realname, userinput, "mariot");
            };
            if (realname == "Hyat Hotel Guest Wi-fi") {
              validateWifi(realname, userinput, "hyat");
            };
            if (realname == "Endall Hotel Free Wi-fi") {
              validateWifi(realname, userinput, "endall");
            };

         }


      }
 });
    function validateWifi(realname, input, needinclude) {
      if ((input.toLowerCase().includes(needinclude) && input.toLowerCase().includes("wi") && input.toLowerCase().includes("fi") && (input.includes("\"") || input.includes("\'"))) || input == "~# airbase- c 11 -v mon0 sb") {
        creatingWifi(input);
      } else {
        alert("Your hotspot's name should include at least '"+ needinclude+ "', and 'wifi'. Also remember to enquote the name.")
        $("#makewifi").val("~# airbase- c 11 -v mon0 ");
      }
    }

    function creatingWifi(input) {
      var message = "Successfully created a hotspot called: " + "\n" + input.substring(24);


      var roguename = input.substring(24);

      $('#creatinghotspot').css({opacity: 0.0, visibility: "visible"}).animate({opacity: 1.0}, 800);

      $("#makewifi").blur();

      setTimeout(function() {
        alert(message);
        window.location.href = "wifilist.html?realname="+realname + "&roguename="+roguename;
      },1500);

    }
    </script>


<style>
input:focus {
    outline: none;
}
</style>


  </head>
  <body>
    <div id="mainbody" style="position:relative"> 
      <img src="assets/aircrack.png" style="width:1000px ;height:400px; position: relative;">
      <input id="makewifi" type="text" autofocus="autofocus"  
      onfocus="this.value = this.value;"/ style="width: 700px; background-color: black; position: absolute; top:225px; left: 70px; border: 0px solid black; color:white;" value="~# airbase- c 11 -v mon0 "></input>

      <img  id="creatinghotspot" src="assets/creatinghotspot.png" style= " width: 60%; position: absolute; top: 245px; visibility: hidden; ">
    </div>

  </body>
</html>
